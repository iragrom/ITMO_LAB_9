{% extends "base.html" %}

{% block content %}
<div class="content">
    <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö –≤–∞–ª—é—Ç—ã</h2>

    <!-- –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-row" style="margin-bottom: 25px; display: flex; gap: 20px; flex-wrap: wrap;">
        <div class="stat-card">
            <span class="stat-number">{{ users|length }}</span>
            <span>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{{ total_subscriptions }}</span>
            <span>–ø–æ–¥–ø–∏—Å–æ–∫</span>
        </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <table>
        <tr>
            <th>ID</th>
            <th>–ò–º—è</th>
            <th>–ü–æ–¥–ø–∏—Å–∫–∏</th>
            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        {% for user in users %}
        <tr>
            <td><strong style="color: #4fc3f7;">#{{ user.id }}</strong></td>
            <td>
                <strong style="color: #00d4aa;">{{ user.name }}</strong>
            </td>
            <td>
                {% if user.currencies %}
                    <div class="currency-tags">
                        {% for currency in user.currencies %}
                        <span class="currency-tag">{{ currency }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    <span class="no-subscriptions">üì≠ –Ω–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫</span>
                {% endif %}
            </td>
            <td><strong>{{ user.currencies|length if user.currencies else 0 }}</strong></td>
            <td>
                <a href="/user?id={{ user.id }}" class="btn btn-sm">üëÅÔ∏è –ü—Ä–æ—Ñ–∏–ª—å</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    {% if not users %}
    <div class="empty-state">
        <h3>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <a href="/currencies" class="btn">–≤–∞–ª—é—Ç—ã</a> –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.</p>
    </div>
    {% endif %}
</div>
{% endblock %}